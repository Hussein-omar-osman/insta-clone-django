{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Insta-clone : Home</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
  </head>
  <body>
    {%load cloudinary%}
    <!-- navbar -->
    <nav class="navbar">
      <img src="{% static 'img/logo.png' %}" class="logo" alt="" />
      <form class="search-box" action="{% url 'searchResults' %}" method="POST">
        {% csrf_token %}
        <input
          type="text"
          placeholder="Search Users"
          name="q"
          id="search-input"
        />
        <button class="search-btn" type="submit">
          <img
            src="{% static 'img/icon/search.png' %}"
            class="search-icon"
            alt=""
          />
        </button>
      </form>
      <div class="nav-links">
        <a href="/" class="nav-links"
          ><img
            src="{% static 'img/icon/home-fill.png' %}"
            class="nav-icon"
            alt=""
        /></a>
        <div class="activity-log">
          <img
            src="{% static 'img/icon/icons-settings.png' %}"
            class="nav-icon"
            alt=""
          />
          <div class="activity-container hide">
            <div class="activity-card">
              <a
                href="{% url 'profile' request.user.username %}"
                style="text-decoration: none; color: black"
                ><p class="activity"><b>Profile</b></p></a
              >
            </div>
            <div class="activity-card">
              <a
                href="{% url 'accountSettings' %}"
                style="text-decoration: none; color: black"
                ><p class="activity"><b>Settings</b></p></a
              >
            </div>
            <hr />
            <div class="activity-card">
              <a href="{% url 'logout' %}"
                ><p class="activity"><b>Logout</b></p></a
              >
            </div>
          </div>
        </div>
        <p class="nav-links open">
          <img
            src="{% static 'img/icon/add-nofill.png' %}"
            class="nav-icon"
            alt=""
          />
        </p>
        <a href="{% url 'profile' request.user.username %}" class="nav-links"
          ><img
            src="{{request.user.image.url}}"
            class="nav-icon user-profile"
            alt=""
        /></a>
      </div>
    </nav>

    <!-- main section -->
    <section class="main">
      <!-- post section -->
      <div class="post-container">
        {% for post in posts %}
        <div class="post">
          <div class="post-header">
            <a
              href="{% url 'profile' post.user.username %}"
              style="
                display: flex;
                justify-content: space-evenly;
                align-items: center;
                text-decoration: none;
                color: black;
              "
            >
              <img src="{{post.user.image.url}}" class="user-icon" alt="" />
              <p class="username" style="margin-left: 10px">
                @{{post.user.username}}
              </p>
            </a>
          </div>
          <div class="post-feed">
            <div class="post-img-container">
              <img src="{{post.image.url}}" alt="" />
              <img src="img/posts/post2.png" alt="" />
              <img src="img/posts/post3.png" alt="" />
              <img src="img/posts/post4.png" alt="" />
              <img src="img/posts/post5.png" alt="" />
            </div>
          </div>
          <div class="post-detail">
            <div class="detail-intracables">
              <a href="{% url 'likePost' post.id %}">
                <img
                  src="{% static 'img/icon/like-nofill.png' %}"
                  class="like-btn"
                  alt=""
                />
              </a>
              <img
                src="{% static 'img/icon/send-nofill.png' %}"
                class="send-btn"
                alt=""
              />
              <a href="{% url 'post' post.id %}"
                ><img
                  src="{% static 'img/icon/comment-nofill.png' %}"
                  class="comment-btn"
                  alt=""
              /></a>
            </div>
            <span class="likes">{{post.likes}} likes</span>

            <p class="post-des">{{post.caption}}</p>
            <span class="comment-count">{{post.comments}} comments</span>
          </div>
        </div>
        {% endfor %}
      </div>

      <!-- right section -->
      <div class="user-about-section">
        <div class="user-info">
          <a href=""></a>
          <img src="{{request.user.image.url}}" class="user-dp" alt="" />
          <div class="info-container">
            <a
              href="{% url 'profile' request.user.username %}"
              style="text-decoration: none; color: black"
              ><h1 class="name">{{request.user.username}}</h1></a
            >
            <p>{{request.user.bio}}</p>
          </div>
        </div>
        <h1 class="suggestion-heading">suggestions</h1>
        <div class="suggestion-container">
          <div class="user-card">
            <img src="img/user1.png" class="user-dp" alt="" />
            <p class="username">@john</p>
            <button class="follow-btn">follow</button>
          </div>
          <div class="user-card">
            <img src="img/user2.png" class="user-dp" alt="" />
            <p class="username">@john</p>
            <button class="follow-btn">follow</button>
          </div>
          <div class="user-card">
            <img src="img/user3.png" class="user-dp" alt="" />
            <p class="username">@john</p>
            <button class="follow-btn">follow</button>
          </div>
        </div>
      </div>
    </section>
    <!-- Modal -->
    <div class="modal-bg">
      <div class="modal-cont">
        <h5 class="modal-title">{{image.name}}</h5>
        <div class="model-cont">
          <div>
            <div>
              <img
                src="{% static 'img/icon/upload-to-cloud-100.png' %}"
                alt=""
              />
            </div>
            <h2>Upload a Pic</h2>
          </div>
        </div>
        <form
          action="{% url 'uploadPic' %}"
          method="POST"
          enctype="multipart/form-data"
        >
          {% csrf_token %}
          <div class="form-upload">
            <div class="img-file">
              <label for="pic">Image:</label>
              <br />
              <input type="file" name="image" id="pic" required />
            </div>
            <div class="img-caption">
              <textarea
                name="caption"
                id=""
                cols="50"
                rows="7"
                placeholder="Caption"
                required
              ></textarea>
            </div>
          </div>

          <div class="modal-footer">
            <button
              class="modal-close2"
              style="
                padding: 10px;
                background-color: gray;
                border-radius: 10px;
                outline: none;
                border: none;
                cursor: pointer;
                color: #ffffff;
                margin-left: 5px;
              "
            >
              Close
            </button>
            <button type="submit" class="follow-btn" style="margin-left: 10px">
              Upload
            </button>
          </div>
        </form>
        <span class="modal-close">&times;</span>
      </div>
    </div>
    <script src="{% static 'js/post.js' %}"></script>
  </body>
</html>
